<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Barplot</title>
    <script src="http://localhost:8080/ada-charts.js"></script>
</head>
<body>
<div id="barplot-controls">
    <span>API examples:</span>
    <button onclick="update()">update()</button>
    <button onclick="toPNG()">toPNG()</button>
    <button onclick="toSVG()">toSVG()</button>
</div>
<div id="barplot-container"></div>
</body>
</html>

<script>

  /**
   * Helper function. Do not copy
   */

  function generateRandomData() {
    const rng = Math.random();
    const numCategories = Math.floor(Math.random() * 9 + 1);
    const numGroups = Math.floor(Math.random() * 9 + 1);

    const categories = [];
    for (let i = 0; i < numCategories; i += 1) {
      categories.push(String.fromCharCode(65 + i));
    }

    const groups = [];
    for (let i = 0; i < numGroups; i += 1) {
      groups.push(String.fromCharCode(97 + i));
    }

    const series = [];
    groups.forEach(group => {
      series.push({
        name: group,
        data: categories.map(category => {
          return {
            name: category,
            y: Math.floor(Math.random() * 10000)
          }
        })
      });
    });
    // if (rng < 0.33) { // contains only negative
    //
    // } else if (rng >= 0.33 && rng < 0.66) { // contains only positive
    //
    // } else { // contains negative and positive
    //
    // }
    return {
      groups,
      categories,
      series
    };
  }

  /**
   * API Documentation below this point
   */
  const container = document.querySelector('#barplot-container');
  const barplot = AdaCharts.chart({ chartType: 'barplot', container });

  function update() {
    const randomData = generateRandomData();
    barplot.update({
      title: "Random generated example",
      categories: randomData.categories,
      barClickCallback: d => console.log(d),
      series: randomData.series,
    });
  }

  function toPNG() {
    barplot.toPNG();
  }

  function toSVG() {
    barplot.toSVG();
  }

  document.addEventListener('DOMContentLoaded', update, false);
</script>

<style>
    body {
        display: flex;
        flex-direction: row;
    }

    #barplot-controls {
        display: flex;
        flex-direction: column;
    }

    #barplot-container {
        width: 50vw;
    }
</style>
